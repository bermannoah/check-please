<h1>Admin Dashboard</h1>

<%= link_to "Edit Admin Account", edit_admin_server_path(@dashboard.admin), class:"btn btn-default" %>

<p>Name: <%= current_user.name %></p>

<div class="container-fluid">
  <div class="row">
    <div class='col-md-4'>
      <h3 class='header'>Servers</h3>
      <table class="admin-tables">
        <thead>
          <tr><th>Server</th><th>Role</th></tr>
        </thead>
        <tbody>
          <% @dashboard.servers.each do |server|%>
          <tr id="server_<%= server.id %>">
              <td><%= server.name %></td>
              <td>
                <%= form_for server, url: admin_server_path(server) do |f| %>
                  <%= f.collection_select :role, @dashboard.roles, :role, :role, {:id=>'server-dropdown'}  %>
              </td>
              <td>
                <%= f.submit "Update", class: "btn btn-info" %>
              </td>
              <% end %>
          </tr>
          <% end %>

        </tbody>
      </table></br>
    </div>

    <div class='col-md-4'>
      <h3 class="header">Orders</h3>
      <table class="admin-tables">
        <tr>
          <% @dashboard.order.statuses.each do |status| %>
          <th> <%= status %></th>
          <% end %>
        </tr>
        <tr>
          <% @dashboard.order.status_count.each do |status_id, count| %>
          <td> <%= count %> </td>
          <% end %>
        </tr>
      </table>
    <br>
    <br>

      <div class="order_partial">
        <%= form_tag(admin_dashboard_path, method: "get") do %>
          <%= collection_select :order, :status, @dashboard.unique_statuses, :status, :status, {:id=>'status-dropdown'} %>
          <%= submit_tag "Submit" %>
        <% end %>
        <%= render partial: "order_list" %>
      </div>

    </div>

    <div class='col-md-4'>
      <h3 class="header">Items</h3>
      <table class="admin-tables">
        <tr><th>Name</th><th>Price</th><th>Category</th></tr>
        <% @dashboard.items.each do |item|%>
        <tr>
            <td><%= link_to item.name, edit_admin_item_path(item) %></td>
            <td><%= number_to_currency(item.price, :unit => "$") %></td>
            <td><%= item.category.name %></td>
        </tr>
        <% end %>
      </table>
    </div>
  </div>
</div>
